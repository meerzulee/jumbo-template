env:
  clear:
    RAILS_ENV: staging

servers:
  web:
    hosts:
      - STAGING_SERVER_IP # CHANGE THIS to your staging server IP

proxy:
  ssl: false
  host: staging.example.com # CHANGE THIS to your staging domain
  forward_headers: true

ssh:
  user: deploy # CHANGE THIS to your SSH user
  port: 22 # CHANGE THIS if using custom SSH port

accessories:
  postgres:
    image: postgres:16
    host: STAGING_SERVER_IP # CHANGE THIS to your staging server IP
    port: "127.0.0.1:5434:5432" # Different port to avoid conflicts
    env:
      clear:
        POSTGRES_DB: APP_NAME_staging
      secret:
        - POSTGRES_PASSWORD
    volumes:
      - APP_NAME_staging_postgres_data:/var/lib/postgresql/data

  postgres-trifecta:
    image: postgres:16
    host: STAGING_SERVER_IP # CHANGE THIS to your staging server IP
    port: "127.0.0.1:5435:5432" # Different port to avoid conflicts
    env:
      clear:
        POSTGRES_DB: APP_NAME_staging_trifecta
      secret:
        - POSTGRES_PASSWORD
    volumes:
      - APP_NAME_staging_postgres_trifecta_data:/var/lib/postgresql/data
